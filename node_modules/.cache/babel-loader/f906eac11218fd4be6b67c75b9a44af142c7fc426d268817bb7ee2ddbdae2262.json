{"ast":null,"code":"import _slicedToArray from\"C:/Users/bryce/beatvisualizer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import ReactPlayer from'react-player';import\"./VideoPlayer.css\";import Metronome from\"../Metronome/Metronome\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VideoPlayer=function VideoPlayer(_ref){var videoUrl=_ref.videoUrl;var _useState=useState(120),_useState2=_slicedToArray(_useState,2),bpm=_useState2[0],setBpm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),delay=_useState4[0],setDelay=_useState4[1];var playerRef=useRef(null);var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),playback=_useState6[0],setPlayback=_useState6[1];function changeBpm(result){setBpm(result);}function changeDelay(result){setDelay(result);}function handlePlayback(result){setPlayback(result);playerRef.current.seekTo(0);}function isReady(){setPlayback(true);}function setTimeToZero(){setPlayback(false);playerRef.current.seekTo(0);}// Previously, the metronome would start before the video loaded, and i couldn't find a way to delay the start of the metronome until the video started\n// Instead, i used onReady and onStart to play the video (which loads it), then immediately stop it, then set it back to the beginning via playerRef.current.seekTo(0)\n// I spent almost a week trying to deal with this singular issue so i don't really care how convoluted this solution is\nreturn/*#__PURE__*/_jsxs(\"div\",{id:\"VideoControls\",children:[/*#__PURE__*/_jsx(ReactPlayer,{ref:playerRef,controls:true,width:\"900px\",height:\"540px\",style:{backgroundColor:\"black\"},url:videoUrl,onReady:isReady,onStart:setTimeToZero,muted:!playback,volume:0.5,playing:playback}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Metronome,{initialBpm:changeBpm,initialDelay:changeDelay,playback:handlePlayback})})]});};export default VideoPlayer;","map":{"version":3,"names":["React","useState","useRef","ReactPlayer","Metronome","jsx","_jsx","jsxs","_jsxs","VideoPlayer","_ref","videoUrl","_useState","_useState2","_slicedToArray","bpm","setBpm","_useState3","_useState4","delay","setDelay","playerRef","_useState5","_useState6","playback","setPlayback","changeBpm","result","changeDelay","handlePlayback","current","seekTo","isReady","setTimeToZero","id","children","ref","controls","width","height","style","backgroundColor","url","onReady","onStart","muted","volume","playing","initialBpm","initialDelay"],"sources":["C:/Users/bryce/beatvisualizer/src/VideoPlayer/VideoPlayer.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport ReactPlayer from 'react-player';\r\nimport \"./VideoPlayer.css\";\r\nimport Metronome from \"../Metronome/Metronome\"\r\n\r\nconst VideoPlayer = ({ videoUrl }) => {\r\n\r\n    const [bpm, setBpm] = useState(120);\r\n    const [delay, setDelay] = useState();\r\n    const playerRef = useRef(null);\r\n    var [playback, setPlayback] = useState(false);\r\n\r\n    function changeBpm(result) {\r\n        setBpm(result);\r\n    }\r\n\r\n    function changeDelay(result) {\r\n        setDelay(result);\r\n    }\r\n    \r\n    function handlePlayback(result) {\r\n        setPlayback(result);\r\n        playerRef.current.seekTo(0);\r\n    }\r\n\r\n    function isReady() {\r\n        setPlayback(true);\r\n        \r\n    }\r\n\r\n    function setTimeToZero() { \r\n        setPlayback(false);\r\n        playerRef.current.seekTo(0);\r\n    }\r\n\r\n    // Previously, the metronome would start before the video loaded, and i couldn't find a way to delay the start of the metronome until the video started\r\n    // Instead, i used onReady and onStart to play the video (which loads it), then immediately stop it, then set it back to the beginning via playerRef.current.seekTo(0)\r\n    // I spent almost a week trying to deal with this singular issue so i don't really care how convoluted this solution is\r\n\r\n    return (\r\n        <div id=\"VideoControls\">\r\n            <ReactPlayer\r\n                ref={playerRef}\r\n                controls\r\n                width=\"900px\" height=\"540px\"\r\n                style={{backgroundColor: \"black\"}}\r\n                url={videoUrl}\r\n                onReady={isReady}\r\n                onStart={setTimeToZero}\r\n                muted={!playback}\r\n                volume={0.5}\r\n                playing={playback}\r\n            />\r\n            <div>\r\n                <Metronome initialBpm={changeBpm} initialDelay={changeDelay} playback={handlePlayback} />\r\n            </div>\r\n            \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default VideoPlayer;"],"mappings":"mHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,MAAO,CAAAC,WAAW,KAAM,cAAc,CACtC,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,SAAS,KAAM,wBAAwB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAE3B,IAAAC,SAAA,CAAsBX,QAAQ,CAAC,GAAG,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5BG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAA0BhB,QAAQ,EAAE,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,GAAM,CAAAG,SAAS,CAAGnB,MAAM,CAAC,IAAI,CAAC,CAC9B,IAAAoB,UAAA,CAA8BrB,QAAQ,CAAC,KAAK,CAAC,CAAAsB,UAAA,CAAAT,cAAA,CAAAQ,UAAA,IAAxCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE1B,QAAS,CAAAG,SAASA,CAACC,MAAM,CAAE,CACvBX,MAAM,CAACW,MAAM,CAAC,CAClB,CAEA,QAAS,CAAAC,WAAWA,CAACD,MAAM,CAAE,CACzBP,QAAQ,CAACO,MAAM,CAAC,CACpB,CAEA,QAAS,CAAAE,cAAcA,CAACF,MAAM,CAAE,CAC5BF,WAAW,CAACE,MAAM,CAAC,CACnBN,SAAS,CAACS,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAC/B,CAEA,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACfP,WAAW,CAAC,IAAI,CAAC,CAErB,CAEA,QAAS,CAAAQ,aAAaA,CAAA,CAAG,CACrBR,WAAW,CAAC,KAAK,CAAC,CAClBJ,SAAS,CAACS,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAC/B,CAEA;AACA;AACA;AAEA,mBACIvB,KAAA,QAAK0B,EAAE,CAAC,eAAe,CAAAC,QAAA,eACnB7B,IAAA,CAACH,WAAW,EACRiC,GAAG,CAAEf,SAAU,CACfgB,QAAQ,MACRC,KAAK,CAAC,OAAO,CAACC,MAAM,CAAC,OAAO,CAC5BC,KAAK,CAAE,CAACC,eAAe,CAAE,OAAO,CAAE,CAClCC,GAAG,CAAE/B,QAAS,CACdgC,OAAO,CAAEX,OAAQ,CACjBY,OAAO,CAAEX,aAAc,CACvBY,KAAK,CAAE,CAACrB,QAAS,CACjBsB,MAAM,CAAE,GAAI,CACZC,OAAO,CAAEvB,QAAS,EACpB,cACFlB,IAAA,QAAA6B,QAAA,cACI7B,IAAA,CAACF,SAAS,EAAC4C,UAAU,CAAEtB,SAAU,CAACuB,YAAY,CAAErB,WAAY,CAACJ,QAAQ,CAAEK,cAAe,EAAG,EACvF,GAEJ,CAGd,CAAC,CAED,cAAe,CAAApB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}