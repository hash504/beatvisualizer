{"ast":null,"code":"import _slicedToArray from\"C:/Users/bryce/Documents/GitHub/beatvisualizer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useCallback,useRef}from\"react\";import useSound from\"use-sound\";import\"./Metronome.css\";import metronomeSfx from\"./metronome-sfx.mp3\";import metronomeFirstBeatSfx from\"./metronome-sfx-firstbeat.mp3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Metronome=function Metronome(_ref){var initialBpm=_ref.initialBpm,initialDelay=_ref.initialDelay,playback=_ref.playback;var _useState=useState(120),_useState2=_slicedToArray(_useState,2),bpm=_useState2[0],setBpm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),delay=_useState4[0],setDelay=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),metronome=_useState6[0],setMetronome=_useState6[1];var _useSound=useSound(metronomeSfx,{volume:0.5}),_useSound2=_slicedToArray(_useSound,1),playSfx=_useSound2[0];var _useSound3=useSound(metronomeFirstBeatSfx,{volume:0.5}),_useSound4=_slicedToArray(_useSound3,1),playFirstBeatSfx=_useSound4[0];var handleBpmChange=useCallback(function(event){setBpm(event.target.value);});var submitBpmChange=useCallback(function(){initialBpm(bpm);},[initialBpm,bpm]);var handleDelayChange=useCallback(function(event){setDelay(event.target.value);});var submitDelayChange=useCallback(function(){initialDelay(delay);},[initialDelay,delay]);var metronomeIndex=1;var interval=60000/bpm;var delayInterval=useRef(null);var metronomeInterval=useRef(null);function startMetronome(){playback(true);setTimeout(function(){setMetronome(1);playFirstBeatSfx();metronomeInterval.current=setInterval(function(){if(metronomeIndex>=4){metronomeIndex=0;}metronomeIndex++;setMetronome(metronomeIndex);if(metronomeIndex===1){playFirstBeatSfx();}else{playSfx();}},interval);},delay);};var stopMetronome=function stopMetronome(){playback(false);clearTimeout(delayInterval.current);clearInterval(metronomeInterval.current);metronomeInterval.current=null;setMetronome(0);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ControlButtons\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"PlayButton\",onClick:startMetronome}),/*#__PURE__*/_jsx(\"button\",{id:\"StopButton\",onClick:stopMetronome})]}),/*#__PURE__*/_jsx(\"div\",{className:\"metronome\"+metronome}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingbars\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"settings\",type:\"number\",className:\"text\",placeholder:\"Insert BPM...\",onChange:handleBpmChange}),/*#__PURE__*/_jsx(\"button\",{className:\"text\",id:\"settingbutton\",onClick:submitBpmChange,children:\"Set\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingbars\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"settings\",type:\"number\",className:\"text\",placeholder:\"Insert delay (MS)...\",onChange:handleDelayChange}),/*#__PURE__*/_jsx(\"button\",{className:\"text\",id:\"settingbutton\",onClick:submitDelayChange,children:\"Set\"})]})]})]});};export default Metronome;","map":{"version":3,"names":["React","useState","useCallback","useRef","useSound","metronomeSfx","metronomeFirstBeatSfx","jsx","_jsx","jsxs","_jsxs","Metronome","_ref","initialBpm","initialDelay","playback","_useState","_useState2","_slicedToArray","bpm","setBpm","_useState3","_useState4","delay","setDelay","_useState5","_useState6","metronome","setMetronome","_useSound","volume","_useSound2","playSfx","_useSound3","_useSound4","playFirstBeatSfx","handleBpmChange","event","target","value","submitBpmChange","handleDelayChange","submitDelayChange","metronomeIndex","interval","delayInterval","metronomeInterval","startMetronome","setTimeout","current","setInterval","stopMetronome","clearTimeout","clearInterval","children","className","id","onClick","type","placeholder","onChange"],"sources":["C:/Users/bryce/Documents/GitHub/beatvisualizer/src/Metronome/Metronome.js"],"sourcesContent":["import React, { useState, useCallback, useRef } from \"react\";\r\nimport useSound from \"use-sound\";\r\nimport \"./Metronome.css\";\r\nimport metronomeSfx from \"./metronome-sfx.mp3\";\r\nimport metronomeFirstBeatSfx from \"./metronome-sfx-firstbeat.mp3\";\r\n\r\n\r\nconst Metronome = ({ initialBpm, initialDelay, playback }) => {\r\n    \r\n    const [bpm, setBpm] = useState(120);\r\n    const [delay, setDelay] = useState();\r\n    const [metronome, setMetronome] = useState(0);\r\n    const [playSfx] = useSound(metronomeSfx, {volume: 0.5});\r\n    const [playFirstBeatSfx] = useSound(metronomeFirstBeatSfx, {volume: 0.5});\r\n\r\n\r\n    const handleBpmChange = useCallback((event) => {\r\n        setBpm(event.target.value);\r\n    });\r\n\r\n    const submitBpmChange = useCallback(() => {\r\n        initialBpm(bpm);\r\n    }, [initialBpm, bpm]);\r\n\r\n    const handleDelayChange = useCallback((event) => {\r\n        setDelay(event.target.value);\r\n    });\r\n\r\n    const submitDelayChange = useCallback(() => {\r\n        initialDelay(delay);\r\n    }, [initialDelay, delay]);\r\n\r\n    let metronomeIndex = 1;\r\n    const interval = 60000 / bpm;\r\n    const delayInterval = useRef(null);\r\n    const metronomeInterval = useRef(null);\r\n    \r\n\r\n    function startMetronome() {\r\n        playback(true);    \r\n        setTimeout(() => {\r\n            setMetronome(1);\r\n            playFirstBeatSfx();\r\n            metronomeInterval.current = setInterval(() => {\r\n                if (metronomeIndex >= 4) {\r\n                    metronomeIndex = 0;\r\n                }\r\n                metronomeIndex++;\r\n                setMetronome(metronomeIndex);\r\n\r\n                if (metronomeIndex === 1) {\r\n                    playFirstBeatSfx();\r\n                }\r\n                else {\r\n                    playSfx();\r\n                }\r\n            }, interval)\r\n        }, delay);\r\n\r\n\r\n    };\r\n\r\n    const stopMetronome = () => {\r\n        playback(false);\r\n        clearTimeout(delayInterval.current);\r\n        clearInterval(metronomeInterval.current);\r\n        metronomeInterval.current = null;\r\n        setMetronome(0);\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"ControlButtons\">\r\n                <button id=\"PlayButton\" onClick={startMetronome}/><button id=\"StopButton\" onClick={stopMetronome}/>\r\n            </div>\r\n            <div className={\"metronome\" + metronome} />\r\n            <div className='settings'>\r\n                <div className='settingbars'>\r\n                    <input id=\"settings\" type=\"number\" className=\"text\" placeholder='Insert BPM...' onChange={handleBpmChange}/><button className=\"text\" id=\"settingbutton\" onClick={submitBpmChange}>Set</button>\r\n                </div>\r\n                <div className='settingbars'>\r\n                    <input id=\"settings\" type=\"number\" className=\"text\" placeholder='Insert delay (MS)...' onChange={handleDelayChange}/><button className=\"text\" id=\"settingbutton\" onClick={submitDelayChange}>Set</button>\r\n                </div>\r\n            </div>\r\n            {/* In the future, i might add functionality for getting information from the getsongbpm.com API, the component for it will be here. */}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Metronome;"],"mappings":"oIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CAC5D,MAAO,CAAAC,QAAQ,KAAM,WAAW,CAChC,MAAO,iBAAiB,CACxB,MAAO,CAAAC,YAAY,KAAM,qBAAqB,CAC9C,MAAO,CAAAC,qBAAqB,KAAM,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGlE,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAAC,IAAA,CAA+C,IAAzC,CAAAC,UAAU,CAAAD,IAAA,CAAVC,UAAU,CAAEC,YAAY,CAAAF,IAAA,CAAZE,YAAY,CAAEC,QAAQ,CAAAH,IAAA,CAARG,QAAQ,CAEnD,IAAAC,SAAA,CAAsBf,QAAQ,CAAC,GAAG,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5BG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAA0BpB,QAAQ,EAAE,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAkCxB,QAAQ,CAAC,CAAC,CAAC,CAAAyB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAtCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,SAAA,CAAkBzB,QAAQ,CAACC,YAAY,CAAE,CAACyB,MAAM,CAAE,GAAG,CAAC,CAAC,CAAAC,UAAA,CAAAb,cAAA,CAAAW,SAAA,IAAhDG,OAAO,CAAAD,UAAA,IACd,IAAAE,UAAA,CAA2B7B,QAAQ,CAACE,qBAAqB,CAAE,CAACwB,MAAM,CAAE,GAAG,CAAC,CAAC,CAAAI,UAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAlEE,gBAAgB,CAAAD,UAAA,IAGvB,GAAM,CAAAE,eAAe,CAAGlC,WAAW,CAAC,SAACmC,KAAK,CAAK,CAC3CjB,MAAM,CAACiB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAC9B,CAAC,CAAC,CAEF,GAAM,CAAAC,eAAe,CAAGtC,WAAW,CAAC,UAAM,CACtCW,UAAU,CAACM,GAAG,CAAC,CACnB,CAAC,CAAE,CAACN,UAAU,CAAEM,GAAG,CAAC,CAAC,CAErB,GAAM,CAAAsB,iBAAiB,CAAGvC,WAAW,CAAC,SAACmC,KAAK,CAAK,CAC7Cb,QAAQ,CAACa,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAChC,CAAC,CAAC,CAEF,GAAM,CAAAG,iBAAiB,CAAGxC,WAAW,CAAC,UAAM,CACxCY,YAAY,CAACS,KAAK,CAAC,CACvB,CAAC,CAAE,CAACT,YAAY,CAAES,KAAK,CAAC,CAAC,CAEzB,GAAI,CAAAoB,cAAc,CAAG,CAAC,CACtB,GAAM,CAAAC,QAAQ,CAAG,KAAK,CAAGzB,GAAG,CAC5B,GAAM,CAAA0B,aAAa,CAAG1C,MAAM,CAAC,IAAI,CAAC,CAClC,GAAM,CAAA2C,iBAAiB,CAAG3C,MAAM,CAAC,IAAI,CAAC,CAGtC,QAAS,CAAA4C,cAAcA,CAAA,CAAG,CACtBhC,QAAQ,CAAC,IAAI,CAAC,CACdiC,UAAU,CAAC,UAAM,CACbpB,YAAY,CAAC,CAAC,CAAC,CACfO,gBAAgB,EAAE,CAClBW,iBAAiB,CAACG,OAAO,CAAGC,WAAW,CAAC,UAAM,CAC1C,GAAIP,cAAc,EAAI,CAAC,CAAE,CACrBA,cAAc,CAAG,CAAC,CACtB,CACAA,cAAc,EAAE,CAChBf,YAAY,CAACe,cAAc,CAAC,CAE5B,GAAIA,cAAc,GAAK,CAAC,CAAE,CACtBR,gBAAgB,EAAE,CACtB,CAAC,IACI,CACDH,OAAO,EAAE,CACb,CACJ,CAAC,CAAEY,QAAQ,CAAC,CAChB,CAAC,CAAErB,KAAK,CAAC,CAGb,CAAC,CAED,GAAM,CAAA4B,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxBpC,QAAQ,CAAC,KAAK,CAAC,CACfqC,YAAY,CAACP,aAAa,CAACI,OAAO,CAAC,CACnCI,aAAa,CAACP,iBAAiB,CAACG,OAAO,CAAC,CACxCH,iBAAiB,CAACG,OAAO,CAAG,IAAI,CAChCrB,YAAY,CAAC,CAAC,CAAC,CACnB,CAAC,CAKD,mBACIlB,KAAA,QAAA4C,QAAA,eACI5C,KAAA,QAAK6C,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC3B9C,IAAA,WAAQgD,EAAE,CAAC,YAAY,CAACC,OAAO,CAAEV,cAAe,EAAE,cAAAvC,IAAA,WAAQgD,EAAE,CAAC,YAAY,CAACC,OAAO,CAAEN,aAAc,EAAE,GACjG,cACN3C,IAAA,QAAK+C,SAAS,CAAE,WAAW,CAAG5B,SAAU,EAAG,cAC3CjB,KAAA,QAAK6C,SAAS,CAAC,UAAU,CAAAD,QAAA,eACrB5C,KAAA,QAAK6C,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxB9C,IAAA,UAAOgD,EAAE,CAAC,UAAU,CAACE,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,MAAM,CAACI,WAAW,CAAC,eAAe,CAACC,QAAQ,CAAExB,eAAgB,EAAE,cAAA5B,IAAA,WAAQ+C,SAAS,CAAC,MAAM,CAACC,EAAE,CAAC,eAAe,CAACC,OAAO,CAAEjB,eAAgB,CAAAc,QAAA,CAAC,KAAG,EAAS,GAC5L,cACN5C,KAAA,QAAK6C,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxB9C,IAAA,UAAOgD,EAAE,CAAC,UAAU,CAACE,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,MAAM,CAACI,WAAW,CAAC,sBAAsB,CAACC,QAAQ,CAAEnB,iBAAkB,EAAE,cAAAjC,IAAA,WAAQ+C,SAAS,CAAC,MAAM,CAACC,EAAE,CAAC,eAAe,CAACC,OAAO,CAAEf,iBAAkB,CAAAY,QAAA,CAAC,KAAG,EAAS,GACvM,GACJ,GAEJ,CAEd,CAAC,CAED,cAAe,CAAA3C,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}